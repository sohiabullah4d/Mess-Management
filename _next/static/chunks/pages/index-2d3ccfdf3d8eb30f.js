(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{1767:(e,t,n)=>{"use strict";n.d(t,{GF:()=>a,J8:()=>i,P2:()=>r,Yq:()=>s});let s=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),i=(e,t)=>e.filter(e=>(!t.name||!!e.name.toLowerCase().includes(t.name.toLowerCase()))&&(!t.status||e.status===t.status)&&(!t.unit||e.unit===t.unit)),r=(e,t,n,s,i)=>{let r=new Date(s,i-1,1),a=new Date(s,i,0),l=e.filter(e=>{let t=new Date(e.date);return t>=r&&t<=a}),d=l.length,c={};l.forEach(e=>{e.itemsUsed.forEach(e=>{c[e.itemId]||(c[e.itemId]=0),c[e.itemId]+=e.totalUsed})});let o=t.map(e=>{let t=c[e.id]||0,n=e.quantity-t;return{...e,used:t,remaining:n,needsRestocking:n<.2*e.quantity}}).filter(e=>e.needsRestocking),x=Object.entries(c).map(e=>{let[n,s]=e,i=t.find(e=>e.id===n);return{name:(null==i?void 0:i.name)||"Unknown",totalUsed:s,unit:(null==i?void 0:i.unit)||""}}).sort((e,t)=>t.totalUsed-e.totalUsed).slice(0,5);return{mealsPrepared:d,itemUsage:c,itemsNeedRestocking:o,mostUsedItems:x}},a=(e,t)=>{let n=Object.keys(e[0]||{}).join(","),s=e.map(e=>Object.values(e).map(e=>"string"==typeof e&&e.includes(",")?'"'.concat(e,'"'):e).join(",")).join("\n"),i=new Blob(["".concat(n,"\n").concat(s)],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),a=URL.createObjectURL(i);r.setAttribute("href",a),r.setAttribute("download","".concat(t,".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},7164:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9558)}])},9558:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var s=n(5640);n(148);var i=n(3097),r=n(6624),a=n(4447),l=n(668),d=n(6171),c=n(90),o=n(4995),x=n(1373),h=n(4068),m=n(3325);let j=(0,n(9535).A)((0,s.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");var u=n(5906),A=n(1767);let y=()=>{let{state:e}=(0,u.U)(),t=e.items.filter(e=>"out-of-stock"===e.status||e.quantity<10),n=e.usage.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,5);return(0,s.jsxs)(i.A,{children:[(0,s.jsx)(r.A,{variant:"h4",gutterBottom:!0,children:"Dashboard"}),(0,s.jsxs)(a.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,s.jsx)(a.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(l.A,{children:(0,s.jsx)(d.A,{children:(0,s.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(x.A,{sx:{fontSize:40,color:"primary.main",mr:2}}),(0,s.jsxs)(i.A,{children:[(0,s.jsx)(r.A,{variant:"h4",children:e.items.length}),(0,s.jsx)(r.A,{variant:"body2",color:"text.secondary",children:"Total Items"})]})]})})})}),(0,s.jsx)(a.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(l.A,{children:(0,s.jsx)(d.A,{children:(0,s.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(h.A,{sx:{fontSize:40,color:"secondary.main",mr:2}}),(0,s.jsxs)(i.A,{children:[(0,s.jsx)(r.A,{variant:"h4",children:e.meals.length}),(0,s.jsx)(r.A,{variant:"body2",color:"text.secondary",children:"Meal Recipes"})]})]})})})}),(0,s.jsx)(a.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(l.A,{children:(0,s.jsx)(d.A,{children:(0,s.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(m.A,{sx:{fontSize:40,color:"success.main",mr:2}}),(0,s.jsxs)(i.A,{children:[(0,s.jsx)(r.A,{variant:"h4",children:e.usage.length}),(0,s.jsx)(r.A,{variant:"body2",color:"text.secondary",children:"Meals Prepared"})]})]})})})}),(0,s.jsx)(a.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(l.A,{children:(0,s.jsx)(d.A,{children:(0,s.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(j,{sx:{fontSize:40,color:"warning.main",mr:2}}),(0,s.jsxs)(i.A,{children:[(0,s.jsx)(r.A,{variant:"h4",children:t.length}),(0,s.jsx)(r.A,{variant:"body2",color:"text.secondary",children:"Low Stock Items"})]})]})})})})]}),t.length>0&&(0,s.jsxs)(c.A,{severity:"warning",sx:{mb:3},children:[(0,s.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"Low Stock Items Need Attention"}),(0,s.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:t.map(e=>(0,s.jsx)(i.A,{sx:{display:"flex",alignItems:"center",mr:2},children:(0,s.jsxs)(r.A,{variant:"body2",children:[e.name," (",e.quantity," ",e.unit,")"]})},e.id))})]}),(0,s.jsxs)(a.Ay,{container:!0,spacing:3,children:[(0,s.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,s.jsx)(l.A,{children:(0,s.jsxs)(d.A,{children:[(0,s.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"Recent Meal Preparations"}),0===n.length?(0,s.jsx)(r.A,{variant:"body2",color:"text.secondary",children:"No meals prepared yet."}):(0,s.jsx)(i.A,{children:n.map(t=>{let n=e.meals.find(e=>e.id===t.mealId);return(0,s.jsxs)(i.A,{sx:{mb:2,pb:2,borderBottom:"1px solid #eee"},children:[(0,s.jsx)(r.A,{variant:"subtitle2",children:(null==n?void 0:n.name)||"Unknown Meal"}),(0,s.jsxs)(r.A,{variant:"body2",color:"text.secondary",children:[(0,A.Yq)(t.date)," â€¢ ",t.peopleCount," people"]})]},t.id)})})]})})}),(0,s.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,s.jsx)(l.A,{children:(0,s.jsxs)(d.A,{children:[(0,s.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"Stock Overview"}),e.items.slice(0,5).map(e=>(0,s.jsxs)(i.A,{sx:{mb:2},children:[(0,s.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,s.jsx)(r.A,{variant:"body2",children:e.name}),(0,s.jsxs)(r.A,{variant:"body2",children:[e.quantity," ",e.unit]})]}),(0,s.jsx)(o.A,{variant:"determinate",value:"out-of-stock"===e.status?0:Math.min(100,e.quantity/50*100),color:"out-of-stock"===e.status?"error":"primary",sx:{height:8,borderRadius:4}})]},e.id))]})})})]})]})}}},e=>{e.O(0,[447,90,374,636,593,792],()=>e(e.s=7164)),_N_E=e.O()}]);